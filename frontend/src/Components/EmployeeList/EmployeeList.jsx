import React, { useEffect, useState } from "react";
import { useNavigate } from "react-router-dom";
import './EmployeeList.css'

const apiUrl = "http://localhost:5000/employees";

function EmployeeList() {
  const [employees, setEmployees] = useState([]);
  const navigate = useNavigate();

  useEffect(() => {
    fetch(apiUrl)
      .then((res) => res.json())
      .then((data) => setEmployees(data))
      .catch((err) => console.error("Error fetching employees:", err));
  }, []);

  const deleteEmployee = async (id) => {
    await fetch(`${apiUrl}/${id}`, { method: "DELETE" });
    setEmployees(employees.filter(emp => emp.employee_id !== id));
  };

  return (
    <div className="container-employeelist">
    
      <button onClick={() => navigate("/add")} className="add-btn">Add Employee</button>
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Address</th>
            <th>Position</th>
            <th>Salary</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {employees.map(emp => (
            <tr key={emp.employee_id}>
              <td>{emp.name}({emp.gender})</td>
              
              <td>{emp.email}</td>
              <td>{emp.phone}</td>
              <td>{emp.city}</td>
              <td>{emp.position}({emp.department})</td>
              <td>{emp.salary}</td>
              <td>
                <button className="edit-btn" onClick={() => navigate(`/edit/${emp.employee_id}`)}><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 100 100">
<path fill="#78a0cf" d="M13 27A2 2 0 1 0 13 31A2 2 0 1 0 13 27Z"></path><path fill="#f1bc19" d="M77 12A1 1 0 1 0 77 14A1 1 0 1 0 77 12Z"></path><path fill="#cee1f4" d="M50 13A37 37 0 1 0 50 87A37 37 0 1 0 50 13Z"></path><path fill="#f1bc19" d="M83 11A4 4 0 1 0 83 19A4 4 0 1 0 83 11Z"></path><path fill="#78a0cf" d="M87 22A2 2 0 1 0 87 26A2 2 0 1 0 87 22Z"></path><path fill="#fbcd59" d="M81 74A2 2 0 1 0 81 78 2 2 0 1 0 81 74zM15 59A4 4 0 1 0 15 67 4 4 0 1 0 15 59z"></path><path fill="#78a0cf" d="M25 85A2 2 0 1 0 25 89A2 2 0 1 0 25 85Z"></path><path fill="#fff" d="M18.5 51A2.5 2.5 0 1 0 18.5 56A2.5 2.5 0 1 0 18.5 51Z"></path><path fill="#f1bc19" d="M21 66A1 1 0 1 0 21 68A1 1 0 1 0 21 66Z"></path><path fill="#fff" d="M80 33A1 1 0 1 0 80 35A1 1 0 1 0 80 33Z"></path><g><path fill="#f1bc19" d="M65,28c3.86,0,7,3.14,7,7v30c0,3.86-3.14,7-7,7H35c-3.86,0-7-3.14-7-7V35c0-3.86,3.14-7,7-7H65"></path><path fill="#472b29" d="M65,28.4c3.639,0,6.6,2.961,6.6,6.6v30c0,3.639-2.961,6.6-6.6,6.6H35c-3.639,0-6.6-2.961-6.6-6.6V35 c0-3.639,2.961-6.6,6.6-6.6H65 M65,27H35c-4.418,0-8,3.582-8,8v30c0,4.418,3.582,8,8,8h30c4.418,0,8-3.582,8-8V35 C73,30.582,69.418,27,65,27L65,27z"></path><path fill="#fdfcee" d="M63,69H37c-3.309,0-6-2.691-6-6V37c0-3.309,2.691-6,6-6h26c3.309,0,6,2.691,6,6v26 C69,66.309,66.309,69,63,69z"></path><path fill="#472b29" d="M63 69H37c-3.309 0-6-2.691-6-6V37c0-3.309 2.691-6 6-6h24.625C61.832 31 62 31.168 62 31.375s-.168.375-.375.375H37c-2.895 0-5.25 2.355-5.25 5.25v26c0 2.895 2.355 5.25 5.25 5.25h26c2.895 0 5.25-2.355 5.25-5.25V48.375c0-.207.168-.375.375-.375S69 48.168 69 48.375V63C69 66.309 66.309 69 63 69zM68.625 42c-.207 0-.375-.168-.375-.375v-1.278c0-.207.168-.375.375-.375S69 40.14 69 40.347v1.278C69 41.832 68.832 42 68.625 42z"></path><path fill="#472b29" d="M68.625,47c-0.207,0-0.375-0.168-0.375-0.375v-3.25c0-0.207,0.168-0.375,0.375-0.375 S69,43.168,69,43.375v3.25C69,46.832,68.832,47,68.625,47z"></path></g><g><path fill="#f1bc19" d="M57.687,39.376c-0.401,0-0.75,0.119-1,0.368L42.311,54.132c-0.463,0.465-1.438,3.042-2.149,4.922 c-0.322,0.851-0.597,1.574-0.757,1.933c-0.056,0.125-0.03,0.261,0.066,0.358l0.155,0.155c0.122,0.123,0.305,0.159,0.468,0.086 c0.417-0.188,1.188-0.481,2.083-0.82c1.907-0.724,4.256-1.615,4.702-2.061l14.377-14.39c0.743-0.744,0.323-2.376-0.936-3.637 C59.483,39.842,58.482,39.376,57.687,39.376z"></path><path fill="#fdfcee" d="M42.311,54.132c-0.463,0.465-1.438,3.042-2.149,4.922c-0.322,0.851-0.597,1.574-0.757,1.933 c-0.056,0.125-0.03,0.261,0.066,0.358l0.155,0.155c0.122,0.123,0.305,0.159,0.468,0.086c0.417-0.188,1.188-0.481,2.083-0.82 c1.907-0.724,4.256-1.615,4.702-2.061l0.003-0.003L42.311,54.132z"></path><path fill="#4a5397" d="M40.181,59.003c-0.006,0.017-0.013,0.035-0.02,0.052c-0.322,0.851-0.597,1.574-0.757,1.933 c-0.056,0.125-0.03,0.261,0.066,0.358l0.155,0.155c0.122,0.123,0.305,0.159,0.468,0.086c0.39-0.176,1.095-0.445,1.916-0.756 L40.181,59.003z"></path><path fill="#7782ac" d="M55.385 41.048H58.193V47.5H55.385z" transform="rotate(-45.001 56.788 44.275)"></path><path fill="#fcb9b9" d="M60.036,45.536l1.219-1.22c0.743-0.744,0.323-2.376-0.936-3.637 c-0.836-0.837-1.837-1.303-2.632-1.303c-0.401,0-0.75,0.119-1,0.368l-1.221,1.222L60.036,45.536z"></path></g><g><path fill="#472b29" d="M57.69,39.75L57.69,39.75c0.722,0,1.628,0.458,2.364,1.194c1.208,1.21,1.459,2.583,0.936,3.107 L46.612,58.441c-0.389,0.389-2.893,1.339-4.55,1.968l-0.075,0.028c-0.875,0.332-1.63,0.619-2.097,0.798l-0.129-0.129 c0.173-0.394,0.454-1.136,0.751-1.92c0.62-1.639,1.658-4.382,2.064-4.789L56.952,40.01C57.125,39.837,57.373,39.75,57.69,39.75 M57.69,39c-0.501,0-0.944,0.155-1.268,0.479L42.046,53.867c-0.481,0.482-1.264,2.486-2.235,5.054 c-0.319,0.842-0.59,1.558-0.749,1.913c-0.119,0.265-0.063,0.569,0.142,0.775l0.156,0.156C39.513,61.919,39.715,62,39.921,62 c0.11,0,0.222-0.024,0.327-0.071c0.408-0.185,1.183-0.478,2.08-0.819c2.525-0.958,4.35-1.673,4.815-2.139l14.378-14.389 c0.905-0.906,0.494-2.736-0.936-4.167C59.668,39.497,58.586,39,57.69,39L57.69,39z"></path><path fill="#472b29" d="M44.346 53.186H44.846V59.65H44.346z" transform="rotate(-45.001 44.59 56.416)"></path><path fill="#472b29" d="M40.839 58.497H41.339V61.325H40.839z" transform="rotate(-45.001 41.088 59.912)"></path><path fill="#472b29" d="M55.546 42.04H56.046V48.492H55.546z" transform="rotate(-45.001 55.796 45.267)"></path><path fill="#472b29" d="M57.531 40.055H58.031V46.507H57.531z" transform="rotate(-45.001 57.781 43.282)"></path><path fill="#472b29" d="M54.615 44.049L54.385 43.951 55.51 41.326 55.74 41.424zM55.49 44.799L55.26 44.701 56.385 42.076 56.615 42.174zM56.365 45.549L56.135 45.451 57.26 42.826 57.49 42.924zM57.144 46.522L56.915 46.424 58.135 43.576 58.365 43.674zM57.981 47.361L57.751 47.263 59.01 44.326 59.24 44.424z"></path></g>
</svg></button>
                <button className="delete-btn" onClick={() => deleteEmployee(emp.employee_id)}><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30" viewBox="0 0 50 50">
<path fill="#429ad4" d="M21.069,12.318c-0.04-0.867-0.08-1.734-0.12-2.601c-0.028-0.615-0.178-1.41,0.064-1.999 c0.211-0.512,0.886-0.554,1.364-0.632c0.842-0.137,1.69-0.235,2.541-0.296c0.866-0.062,1.735-0.081,2.602-0.041 c0.432,0.02,0.865,0.052,1.295,0.106c0.289,0.036,0.831,0.036,1.086,0.206c0.427,0.285,0.396,1.103,0.395,1.543 c-0.002,0.886-0.082,1.776-0.221,2.651c-0.085,0.533,0.137,1.076,0.698,1.23c0.476,0.131,1.144-0.162,1.23-0.698 c0.183-1.144,0.333-2.323,0.29-3.484c-0.035-0.95-0.246-2.014-0.989-2.678c-0.768-0.685-1.947-0.724-2.919-0.815 c-1.08-0.102-2.167-0.102-3.249-0.034c-1.101,0.069-2.201,0.203-3.29,0.382c-0.919,0.151-1.808,0.452-2.371,1.24 c-0.519,0.726-0.59,1.642-0.562,2.507c0.037,1.138,0.104,2.276,0.156,3.413C19.128,13.599,21.128,13.606,21.069,12.318 L21.069,12.318z"></path><path fill="#429ad4" d="M42.867,12.357c-0.39-0.975-1.067-1.629-2.058-1.919c-0.734-0.216-10.669-0.416-10.669-0.416 s-14.888,0.422-17.558,0.626c-1.448,0.168-2.412,0.269-3.36,0.968c-1.328,0.98-1.935,2.68-1.145,4.242 c0.54,1.068,1.456,1.661,2.486,1.992c0.489,4.561,1.282,9.081,1.832,13.636c0.318,2.64,0.389,5.314,0.781,7.943 c0.317,2.123,1.01,5.209,3.354,5.792c1.203,0.299,2.542,0.118,3.766,0.092c1.339-0.029,2.677-0.058,4.016-0.087 c2.671-0.058,5.343-0.106,8.014-0.174c1.162-0.029,2.377-0.12,3.397-0.759c0.89-0.558,1.548-1.446,1.972-2.419 c0.974-2.238,1.197-4.848,1.373-7.268c0.221-3.038,0.206-6.095,0.254-9.14c0.044-2.757,0.087-5.514,0.131-8.272 c1.636,0.083,3.489,0.056,3.907-1.906C43.572,14.289,43.233,13.271,42.867,12.357z"></path><path fill="#231f20" d="M10.986,18.686c9.362-0.411,18.728-0.681,28.099-0.697c0.643-0.001,0.645-1.001,0-1 c-9.371,0.015-18.738,0.286-28.099,0.697C10.345,17.714,10.341,18.714,10.986,18.686L10.986,18.686z"></path><path fill="#fff" d="M10.946,15.912c5.243-0.366,10.503-0.231,15.75-0.498c1.921-0.098,1.933-3.098,0-3 c-5.247,0.267-10.507,0.132-15.75,0.498c-0.808,0.056-1.5,0.649-1.5,1.5C9.446,15.181,10.133,15.969,10.946,15.912L10.946,15.912z"></path><path fill="#231f20" d="M17.761,23.937c0.148,5.513,0.33,11.025,0.546,16.536c0.025,0.641,1.025,0.645,1,0 c-0.216-5.511-0.399-11.023-0.546-16.536C18.744,23.294,17.744,23.292,17.761,23.937L17.761,23.937z"></path><path fill="#231f20" d="M25.663,24.255c-0.092,5.256-0.183,10.511-0.275,15.767c-0.011,0.644,0.989,0.644,1,0 c0.092-5.256,0.183-10.511,0.275-15.767C26.674,23.611,25.674,23.611,25.663,24.255L25.663,24.255z"></path><path fill="#231f20" d="M33.502,24.585c-1.111,4.801-2.006,9.648-2.683,14.529c-0.087,0.629,0.876,0.902,0.964,0.266 c0.677-4.881,1.572-9.728,2.683-14.529C34.611,24.225,33.647,23.958,33.502,24.585L33.502,24.585z"></path><path fill="#99c93c" d="M4.078,32.522c0.593,0.548,1.152,1.132,1.67,1.751c0.128,0.153,0.253,0.307,0.376,0.464 c0.018,0.023,0.114,0.145,0.024,0.03c-0.097-0.125,0.023,0.03,0.043,0.057c0.06,0.079,0.119,0.159,0.178,0.24 c0.241,0.33,0.471,0.669,0.691,1.014c0.281,0.441,0.902,0.659,1.368,0.359c0.441-0.284,0.659-0.896,0.359-1.368 c-0.924-1.451-2.031-2.792-3.295-3.96c-0.384-0.355-1.039-0.409-1.414,0C3.724,31.494,3.668,32.143,4.078,32.522L4.078,32.522z"></path><path fill="#99c93c" d="M2.767,39.39c0.34,0.122,0.676,0.254,1.012,0.39c0.102,0.043,0.089,0.037-0.039-0.017 c0.044,0.019,0.089,0.038,0.133,0.057c0.066,0.029,0.133,0.058,0.199,0.087c0.165,0.073,0.329,0.149,0.493,0.226 c0.643,0.304,1.27,0.64,1.881,1.003c0.45,0.267,1.117,0.116,1.368-0.359c0.255-0.482,0.122-1.083-0.359-1.368 c-1.318-0.782-2.714-1.429-4.156-1.947c-0.493-0.177-1.116,0.2-1.23,0.698C1.94,38.722,2.239,39.2,2.767,39.39L2.767,39.39z"></path><path fill="#99c93c" d="M7.214,48.113c1.172-1.031,2.336-2.071,3.491-3.122c0.388-0.353,0.385-1.061,0-1.414 c-0.415-0.381-1-0.376-1.414,0c-1.155,1.05-2.319,2.091-3.491,3.122c-0.394,0.347-0.381,1.065,0,1.414 C6.22,48.498,6.793,48.482,7.214,48.113L7.214,48.113z"></path><path fill="#ff9600" d="M37.489,4.825c0.418,1.144,1.192,2.176,2.291,2.745c0.556,0.288,1.137,0.455,1.761,0.501 c0.617,0.046,1.208-0.104,1.766-0.355c0.479-0.216,0.63-0.947,0.359-1.368c-0.319-0.495-0.856-0.589-1.368-0.359 c0.091-0.041,0.165-0.063,0.027-0.015c-0.041,0.014-0.082,0.028-0.123,0.04c-0.089,0.026-0.197,0.031-0.283,0.065 c0.193-0.075,0.145-0.017,0.042-0.009c-0.054,0.004-0.107,0.007-0.161,0.008c-0.097,0.002-0.194-0.002-0.291-0.01 c-0.097-0.008-0.163-0.066,0.04,0.008c-0.039-0.014-0.088-0.015-0.129-0.024c-0.097-0.02-0.192-0.045-0.287-0.073 c-0.092-0.028-0.187-0.079-0.281-0.099c0.211,0.045,0.103,0.044,0.027,0.007c-0.05-0.024-0.099-0.049-0.148-0.075 c-0.088-0.047-0.173-0.099-0.256-0.153c-0.037-0.024-0.073-0.049-0.11-0.075c-0.131-0.093-0.025-0.055,0.018,0.016 c-0.046-0.076-0.164-0.141-0.229-0.204C40.075,5.321,40,5.242,39.928,5.16c-0.008-0.009-0.147-0.19-0.06-0.067 c0.088,0.125-0.047-0.066-0.052-0.073c-0.063-0.089-0.121-0.181-0.177-0.275c-0.055-0.094-0.107-0.19-0.154-0.288 c-0.011-0.023-0.04-0.121-0.061-0.132c0.048,0.116,0.059,0.14,0.032,0.071c-0.013-0.034-0.026-0.068-0.038-0.102 c-0.179-0.49-0.687-0.874-1.23-0.698C37.706,3.751,37.296,4.299,37.489,4.825L37.489,4.825z"></path><path fill="#ff9600" d="M46.25,5.372c1.287,0,1.289-2,0-2C44.963,3.372,44.961,5.372,46.25,5.372L46.25,5.372z"></path>
</svg></button>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}
export default EmployeeList;